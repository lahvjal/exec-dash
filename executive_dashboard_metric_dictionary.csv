dashboard_section,card_title,question_answered,definition_notes,numerator_definition,denominator_definition,aggregation_method,source_tables,joins_relationships,status_filters,excluded_statuses,duplicate_test_exclusion_rule,period_date_field,period_logic_current_week,period_logic_previous_week,period_logic_mtd,period_logic_ytd,period_logic_next_week,exact_formula_or_query,manual_validation_steps
Sales Stats,Total Sales,How many residential contracts were sold?,Counts all signed contracts in the selected period excluding cancelled and duplicates,COUNT(*) of projects with contract-signed in period,N/A (count metric),COUNT,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed,✓,✓,✓,✓,N/A,"SELECT COUNT(*) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Query distinct project-dev-id count. 2. Verify no duplicate projects included. 3. Check that cancelled projects are excluded. 4. Confirm date range matches period selector."
Sales Stats,Aveyo Approved,How many sales passed internal QA?,Counts projects with approved SOW timestamp,COUNT(DISTINCT project-id) with sow-approved-timestamp,N/A (count metric),COUNT,customer-sow; project-data,"customer-sow.project-id = project-data.project-id (simple project-id not project-dev-id)",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',sow-approved-timestamp,✓,✓,✓,✓,N/A,"SELECT COUNT(DISTINCT cs.project-id) FROM customer-sow cs JOIN project-data pd ON cs.project-id = pd.project-id WHERE cs.sow-approved-timestamp >= '[period_start]' AND cs.sow-approved-timestamp <= '[period_end]' AND pd.project-status != 'Cancelled'","1. Note: Uses simple project-id field. 2. Verify distinct count (no duplicates). 3. Check SOW-approved-timestamp is non-null. 4. Confirm cancelled filter applied."
Sales Stats,Pull Through Rate,What % of jobs sold reached install complete?,Percentage of jobs sold in period that achieved installation completion,"COUNT(*) WHERE install-complete IS NOT NULL AND contract-signed in [period]","COUNT(*) WHERE contract-signed in [period]",PERCENTAGE,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed (for period filter),✓,✓,✓,✓,N/A,"SELECT (COUNT(CASE WHEN t.install-complete IS NOT NULL THEN 1 END) / COUNT(*)) * 100 FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Both numerator and denominator use contract-signed date. 2. Verify install-complete is NOT NULL for numerator. 3. Recent periods will show low % (jobs need time). 4. Validate count breakdown matches."
Sales Stats,% Jobs with Battery,What % of sold jobs include battery storage?,Percentage of sales with battery systems,"COUNT(*) WHERE battery-count > 0 AND contract-signed in [period]","COUNT(*) WHERE contract-signed in [period]",PERCENTAGE,project-data; timeline,"project-data.project-dev-id = timeline.project-dev-id",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed,✓,✓,✓,✓,N/A,"SELECT (COUNT(CASE WHEN pd.battery-count > 0 THEN 1 END) / COUNT(*)) * 100 FROM project-data pd JOIN timeline t ON pd.project-dev-id = t.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Check battery-count > 0 for numerator. 2. Verify both use contract-signed as baseline. 3. Validate % and breakdown match. 4. Database shows 41% overall battery rate."
Sales Stats,% of Packet Approvals,What % of sales received packet approval?,Measures approval rate for sales packets,"COUNT(*) WHERE packet-approval IS NOT NULL AND contract-signed in [period]","COUNT(*) WHERE contract-signed in [period]",PERCENTAGE,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed,✓,✓,✓,✓,N/A,"SELECT (COUNT(CASE WHEN t.packet-approval IS NOT NULL THEN 1 END) / COUNT(*)) * 100 FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Note: packet-approval has only 38% coverage. 2. Both use contract-signed as baseline. 3. Verify packet-approval IS NOT NULL for numerator. 4. Low coverage may skew results."
Sales Stats,Reps with a Sale,How many unique reps closed deals?,Count of unique sales reps (closers + setters),COUNT(DISTINCT sales-rep-id) + COUNT(DISTINCT setter-id) where contract-signed in [period],N/A (count metric),COUNT,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed,✓,✓,✓,✓,N/A,"SELECT COUNT(DISTINCT pd.sales-rep-id) + COUNT(DISTINCT pd.setter-id) FROM project-data pd JOIN timeline t ON pd.project-dev-id = t.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Sum distinct closers and setters. 2. Verify no double-counting if same person is both. 3. Check breakdown shows (X closers Y setters). 4. Null IDs should be excluded."
Sales Stats,Pull Through % (Rolling 6M),What % of jobs sold 61-180 days ago reached install complete?,Rolling 6-month metric - fixed lookback window prevents 0% for recent periods,"COUNT(*) WHERE install-complete IS NOT NULL AND contract-signed BETWEEN DATE_SUB(CURDATE() INTERVAL 180 DAY) AND DATE_SUB(CURDATE() INTERVAL 61 DAY)","COUNT(*) WHERE contract-signed BETWEEN DATE_SUB(CURDATE() INTERVAL 180 DAY) AND DATE_SUB(CURDATE() INTERVAL 61 DAY)",PERCENTAGE,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed (61-180 days ago - NO period filter),N/A,N/A,N/A,N/A,N/A,"SELECT (COUNT(CASE WHEN t.install-complete IS NOT NULL THEN 1 END) / COUNT(*)) * 100 FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= DATE_SUB(CURDATE() INTERVAL 180 DAY) AND t.contract-signed <= DATE_SUB(CURDATE() INTERVAL 61 DAY) AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: This metric IGNORES period selector - always uses 61-180 day lookback. 1. Verify date range is exactly 61-180 days. 2. Numerator: must have install-complete. 3. Both use contract-signed as baseline. 4. Should show consistent % across all periods."
Sales Stats,Max Pull Through % (Rolling 6M),What % of jobs sold 61-180 days ago are still active (potential ceiling)?,Maximum achievable pull-through - excludes stuck/cancelled jobs,"COUNT(*) WHERE contract-signed BETWEEN 61-180 days ago AND project-status NOT IN ('Cancelled' 'Pending Cancel' 'On Hold' 'Finance Hold')","COUNT(*) WHERE contract-signed BETWEEN 61-180 days ago",PERCENTAGE,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status NOT IN ('Cancelled' 'Pending Cancel' 'On Hold' 'Finance Hold'),"Cancelled, Pending Cancel, On Hold, Finance Hold, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',contract-signed (61-180 days ago - NO period filter),N/A,N/A,N/A,N/A,N/A,"SELECT (COUNT(CASE WHEN pd.project-status NOT IN ('Cancelled' 'Pending Cancel' 'On Hold' 'Finance Hold') THEN 1 END) / COUNT(*)) * 100 FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= DATE_SUB(CURDATE() INTERVAL 180 DAY) AND t.contract-signed <= DATE_SUB(CURDATE() INTERVAL 61 DAY) AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: Ignores period selector. 1. Numerator EXCLUDES 4 specific statuses. 2. Numerator INCLUDES: Active Complete Pre-Approvals New Lender. 3. Shows max achievable rate if all active jobs complete. 4. Result should be ≥ regular pull-through %."
Operations Stats,Jobs Placed ON HOLD,How many jobs are currently paused?,Current snapshot of paused projects,COUNT(*) WHERE project-status = 'On Hold',N/A (count metric - no period filter),COUNT,project-data; timeline,"project-data.project-dev-id = timeline.project-dev-id",project-status = 'On Hold',Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT COUNT(*) FROM project-data pd JOIN timeline t ON pd.project-dev-id = t.project-dev-id WHERE pd.project-status = 'On Hold' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter - shows ALL jobs currently on hold regardless of period. 1. Verify count is current snapshot. 2. Database currently shows ~276 on hold. 3. Highlighted as bottleneck indicator."
Operations Stats,Installs Complete,How many installations finished?,Installations marked complete in period,COUNT(*) WHERE install-complete in [period] AND install-stage-status = 'Complete',N/A (count metric),COUNT,timeline,"N/A (single table)",install-stage-status = 'Complete',Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',install-complete,✓,✓,✓,✓,N/A,"SELECT COUNT(*) FROM timeline WHERE install-complete >= '[period_start]' AND install-complete <= '[period_end]' AND install-stage-status = 'Complete' AND (cancellation-reason IS NULL OR cancellation-reason != 'Duplicate Project (Error)')","1. Uses install-complete date as period filter (NOT contract-signed). 2. Must have install-stage-status = 'Complete'. 3. Database shows 3003 total complete records. 4. Verify date matches period exactly."
Operations Stats,Install Complete NO PTO,How many completed installs are awaiting PTO?,Bottleneck: installs finished but no permission to operate,COUNT(*) WHERE install-complete in [period] AND pto-received IS NULL AND install-stage-status = 'Complete',N/A (count metric),COUNT,timeline,"N/A (single table)",install-stage-status = 'Complete' AND pto-received IS NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',install-complete,✓,✓,✓,✓,N/A,"SELECT COUNT(*) FROM timeline WHERE install-complete >= '[period_start]' AND install-complete <= '[period_end]' AND pto-received IS NULL AND install-stage-status = 'Complete' AND (cancellation-reason IS NULL OR cancellation-reason != 'Duplicate Project (Error)')","1. Uses install-complete date for period filter. 2. pto-received must be NULL. 3. Highlighted as bottleneck. 4. Subset of Installs Complete."
Operations Stats,Install Scheduled,How many installs are on the calendar?,Future installations scheduled,COUNT(*) WHERE install-appointment in [period],N/A (count metric),COUNT,timeline,"N/A (single table)",N/A,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',install-appointment,✓,✓,N/A,N/A,✓,"SELECT COUNT(*) FROM timeline WHERE install-appointment >= '[period_start]' AND install-appointment <= '[period_end]' AND (cancellation-reason IS NULL OR cancellation-reason != 'Duplicate Project (Error)')","1. Uses install-appointment date. 2. Typically for current/previous/next week. 3. Shows upcoming workload. 4. Not available for MTD/YTD."
Operations Stats,PTO Received,How many PTOs were received?,Projects that received permission to operate,COUNT(*) WHERE pto-received in [period],N/A (count metric),COUNT,timeline,"N/A (single table)",N/A,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',pto-received,✓,✓,✓,✓,N/A,"SELECT COUNT(*) FROM timeline WHERE pto-received >= '[period_start]' AND pto-received <= '[period_end]' AND (cancellation-reason IS NULL OR cancellation-reason != 'Duplicate Project (Error)')","1. Uses pto-received date for period filter. 2. Final milestone for project. 3. Coverage: 44.8% (2713 records). 4. Verify distinct count."
Operations Stats,# of Active Jobs; Install Not Started,How many active jobs have no install scheduled?,Operational bottleneck - active but no appointment,COUNT(*) WHERE project-status = 'Active' AND install-appointment IS NULL,N/A (count metric - no period filter),COUNT,project-data; timeline,"project-data.project-dev-id = timeline.project-dev-id",project-status = 'Active' AND install-appointment IS NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT COUNT(*) FROM project-data pd JOIN timeline t ON pd.project-dev-id = t.project-dev-id WHERE pd.project-status = 'Active' AND t.install-appointment IS NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter - current snapshot. 1. Highlighted as bottleneck. 2. Status: danger if ≥50 warning if ≥20. 3. Shows jobs stuck in pipeline."
Cycle Times,Avg Days PP → Install Start,How long from packet approval to install?,Average days between perfect packet and installation,"SUM(DATEDIFF(install-appointment packet-approval)) WHERE both dates NOT NULL AND contract-signed in [period]","COUNT(*) WHERE both dates NOT NULL AND contract-signed in [period]",AVG (mean),timeline,"N/A (single table)",Both dates NOT NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',contract-signed (baseline for period filter),✓,✓,✓,✓,N/A,"SELECT AVG(DATEDIFF(install-appointment packet-approval)) FROM timeline WHERE contract-signed >= '[period_start]' AND contract-signed <= '[period_end]' AND packet-approval IS NOT NULL AND install-appointment IS NOT NULL AND (cancellation-reason IS NULL OR cancellation-reason != 'Duplicate Project (Error)')","⚠️ Uses contract-signed as baseline per rule. 1. TODO: Change to MEDIAN. 2. Only 37.7% coverage (2285 records). 3. Lower is better. 4. Verify DATEDIFF calculation."
Cycle Times,Avg Days Install → M2 Approved,How long from install to M2 milestone?,Average days between install and M2 approval,"SUM(DATEDIFF(m2-approved install-appointment)) WHERE both dates NOT NULL AND contract-signed in [period]","COUNT(*) WHERE both dates NOT NULL AND contract-signed in [period]",AVG (mean),timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",Both dates NOT NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',contract-signed (baseline for period filter),✓,✓,✓,✓,N/A,"SELECT AVG(DATEDIFF(pd.m2-approved t.install-appointment)) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND t.install-appointment IS NOT NULL AND pd.m2-approved IS NOT NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ Uses contract-signed as baseline per rule. 1. TODO: Change to MEDIAN. 2. M2-approved coverage: 47.7% (2893 records). 3. Lower is better. 4. Verify both dates present."
Cycle Times,Avg Days PP → PTO,How long from packet to permission?,Complete cycle from packet approval to PTO,"SUM(DATEDIFF(pto-received packet-approval)) WHERE both dates NOT NULL AND contract-signed in [period]","COUNT(*) WHERE both dates NOT NULL AND contract-signed in [period]",AVG (mean),timeline,"N/A (single table)",Both dates NOT NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',contract-signed (baseline for period filter),✓,✓,✓,✓,N/A,"SELECT AVG(DATEDIFF(pto-received packet-approval)) FROM timeline WHERE contract-signed >= '[period_start]' AND contract-signed <= '[period_end]' AND packet-approval IS NOT NULL AND pto-received IS NOT NULL AND (cancellation-reason IS NULL OR cancellation-reason != 'Duplicate Project (Error)')","⚠️ Uses contract-signed as baseline per rule. 1. TODO: Change to MEDIAN. 2. Coverage: 44.8% PTO 37.7% PP. 3. End-to-end metric. 4. Lower is better."
Cycle Times,Avg Days Sale → Glass on Roof,How long from contract to panel installation?,Time from sale to physical installation,"SUM(DATEDIFF(panel-install-complete contract-signed)) WHERE both dates NOT NULL AND contract-signed in [period]","COUNT(*) WHERE both dates NOT NULL AND contract-signed in [period]",AVG (mean),timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',Cancelled,cancellation-reason != 'Duplicate Project (Error)',contract-signed,✓,✓,✓,✓,N/A,"SELECT AVG(DATEDIFF(t.panel-install-complete t.contract-signed)) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND t.panel-install-complete IS NOT NULL AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","✓ Correctly uses contract-signed as baseline. 1. Full pipeline metric. 2. Lower is better. 3. Excludes cancelled. 4. TODO: Change to MEDIAN."
Cycle Times,Avg Days Sale → PTO,How long is complete project lifecycle?,End-to-end time from sale to energization,"SUM(DATEDIFF(pto-received contract-signed)) WHERE both dates NOT NULL AND contract-signed in [period]","COUNT(*) WHERE both dates NOT NULL AND contract-signed in [period]",AVG (mean),timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",project-status != 'Cancelled',Cancelled,cancellation-reason != 'Duplicate Project (Error)',contract-signed,✓,✓,✓,✓,N/A,"SELECT AVG(DATEDIFF(t.pto-received t.contract-signed)) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.contract-signed >= '[period_start]' AND t.contract-signed <= '[period_end]' AND t.pto-received IS NOT NULL AND pd.project-status != 'Cancelled' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","✓ Correctly uses contract-signed as baseline. 1. Complete lifecycle metric. 2. Lower is better. 3. PTO coverage 44.8%. 4. TODO: Change to MEDIAN."
Residential Financials,A/R (M2/M3 Submitted Not Received),How much money is owed to us?,Outstanding receivables for submitted but unpaid milestones,"SUM(contract-price * 0.8) WHERE m2-submitted NOT NULL AND m2-received IS NULL + SUM(contract-price * 0.2) WHERE m3-submitted NOT NULL AND m3-received IS NULL",N/A (sum metric - no period filter),SUM,funding; timeline,"funding.project_ids = timeline.project-dev-id (via string match)",project-status-2 IN ('Active' 'New Lender' 'Finance Hold' 'Pre-Approvals'),"Complete, Cancelled, On Hold, Pending Cancel, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT SUM(CASE WHEN f.m2-submitted-date IS NOT NULL AND f.m2-received-date IS NULL THEN f.contract-price * 0.8 ELSE 0 END) + SUM(CASE WHEN f.m3-submitted-date IS NOT NULL AND f.m3-received-date IS NULL THEN f.contract-price * 0.2 ELSE 0 END) FROM funding f JOIN timeline t ON f.project_ids = t.project-dev-id WHERE f.project-status-2 IN ('Active' 'New Lender' 'Finance Hold' 'Pre-Approvals') AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter - current snapshot. 1. M2=80% M3=20% of contract. 2. Only active statuses included. 3. Shows (X projects M2: Y M3: Z). 4. Verify funding table join."
Residential Financials,Revenue Received,How much did we receive in payments?,Total payments received in period,"SUM(contract-price * 0.2) WHERE m1-received-date in [period] + SUM(contract-price * 0.8) WHERE m2-received-date in [period]",N/A (sum metric),SUM,project-data; timeline,"project-data.project-dev-id = timeline.project-dev-id",N/A,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',m1-received-date OR m2-received-date,✓,✓,✓,✓,N/A,"SELECT SUM(CASE WHEN pd.m1-received-date >= '[period_start]' AND pd.m1-received-date <= '[period_end]' THEN pd.contract-price * 0.2 ELSE 0 END) + SUM(CASE WHEN pd.m2-received-date >= '[period_start]' AND pd.m2-received-date <= '[period_end]' THEN pd.contract-price * 0.8 ELSE 0 END) FROM project-data pd JOIN timeline t ON pd.project-dev-id = t.project-dev-id WHERE (pd.m1-received-date >= '[period_start]' AND pd.m1-received-date <= '[period_end]') OR (pd.m2-received-date >= '[period_start]' AND pd.m2-received-date <= '[period_end]') AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: Uses TWO different date fields (m1-received m2-received). 1. M1=20% M2=80%. 2. Shows project count with payments. 3. Both milestone dates checked. 4. Verify distinct project count."
Residential Financials,Install Complete M2 Not Approved,How much M2 money is pending approval?,Financial backlog - installs done but paperwork incomplete,SUM(contract-price * 0.8) WHERE install-complete IS NOT NULL AND m2-approved IS NULL,N/A (sum metric - no period filter),SUM,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",N/A,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT SUM(pd.contract-price * 0.8) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.install-complete IS NOT NULL AND pd.m2-approved IS NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter - current snapshot. 1. M2 = 80% of contract. 2. Highlighted as bottleneck. 3. Money ready to bill. 4. Shows project count."
Active Pipeline,Active Pipeline (Active NO PTO),How many active projects lack PTO?,Current pipeline of progressing projects,COUNT(*) WHERE project-status IN ('Active' 'Complete' 'Pre-Approvals' 'New Lender' 'Finance Hold') AND pto-received IS NULL,N/A (count metric - no period filter),COUNT,project-data; timeline,"project-data.project-dev-id = timeline.project-dev-id",project-status IN ('Active' 'Complete' 'Pre-Approvals' 'New Lender' 'Finance Hold') AND pto-received IS NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT COUNT(*) FROM project-data pd JOIN timeline t ON pd.project-dev-id = t.project-dev-id WHERE pd.project-status IN ('Active' 'Complete' 'Pre-Approvals' 'New Lender' 'Finance Hold') AND t.pto-received IS NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter - current snapshot. 1. Includes 5 active statuses. 2. Shows all without PTO regardless of sale date. 3. Pipeline health indicator."
Finance,Install Started – M2 Not Received,How much M2 is awaiting payment?,Receivables for completed installs,SUM(contract-price * 0.8) WHERE install-complete IS NOT NULL AND m2-received-date IS NULL,N/A (sum metric - no period filter),SUM,timeline; funding; project-data,"timeline.project-dev-id = funding.project_ids; timeline.project-dev-id = project-data.project-dev-id",N/A,"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT SUM(f.contract-price * 0.8) FROM timeline t JOIN funding f ON t.project-dev-id = f.project_ids JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.install-complete IS NOT NULL AND f.m2-received-date IS NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter. 1. Status: danger ≥$500k warning ≥$200k. 2. M2 = 80%. 3. Shows project count. 4. Verify funding table join."
Finance,PTO Received – M3 Not Received,How much M3 is awaiting payment?,Receivables for PTO-complete projects,SUM(contract-price * 0.2) WHERE pto-received IS NOT NULL AND m3-received-date IS NULL,N/A (sum metric - no period filter),SUM,timeline; funding; project-data,"timeline.project-dev-id = funding.project_ids; timeline.project-dev-id = project-data.project-dev-id",N/A,"Cancelled, Duplicate Project (Error)",cancellation-reason != 'Duplicate Project (Error)',N/A (no period filter - current snapshot),N/A,N/A,N/A,N/A,N/A,"SELECT SUM(f.contract-price * 0.2) FROM timeline t JOIN funding f ON t.project-dev-id = f.project_ids JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.pto-received IS NOT NULL AND f.m3-received-date IS NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","⚠️ FLAG: No period filter. 1. Status: danger ≥$300k warning ≥$100k. 2. M3 = 20%. 3. Shows project count. 4. Verify funding table join."
Commercial Division,Total KW Scheduled,What KW capacity is scheduled?,Planned installation capacity,SUM(system-size) WHERE install-appointment in [period] AND install-complete IS NULL,N/A (sum metric),SUM,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",install-complete IS NULL,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',install-appointment,✓,✓,N/A,N/A,✓,"SELECT SUM(pd.system-size) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.install-appointment >= '[period_start]' AND t.install-appointment <= '[period_end]' AND t.install-complete IS NULL AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Uses install-appointment date. 2. Must NOT be complete yet. 3. System-size has 100% coverage. 4. Typically for week periods."
Commercial Division,Total KW Installed,What KW capacity was installed?,Actual installed capacity,SUM(system-size) WHERE install-complete in [period],N/A (sum metric),SUM,timeline; project-data,"timeline.project-dev-id = project-data.project-dev-id",N/A,Duplicate Project (Error),cancellation-reason != 'Duplicate Project (Error)',install-complete,✓,✓,✓,✓,N/A,"SELECT SUM(pd.system-size) FROM timeline t JOIN project-data pd ON t.project-dev-id = pd.project-dev-id WHERE t.install-complete >= '[period_start]' AND t.install-complete <= '[period_end]' AND (t.cancellation-reason IS NULL OR t.cancellation-reason != 'Duplicate Project (Error)')","1. Uses install-complete date. 2. Measures delivered capacity. 3. System-size 100% coverage. 4. Verify sum is accurate."
